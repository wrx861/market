# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Market Auto Parts –Ω–∞ —á–∏—Å—Ç—ã–π —Å–µ—Ä–≤–µ—Ä

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

- **OS:** Ubuntu 22.04 / 24.04 LTS
- **RAM:** –ú–∏–Ω–∏–º—É–º 2GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB)
- **Disk:** –ú–∏–Ω–∏–º—É–º 20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **CPU:** 2 —è–¥—Ä–∞
- **–î–æ—Å—Ç—É–ø:** Root –∏–ª–∏ sudo
- **–î–æ–º–µ–Ω:** –í–∞—à –¥–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞ (A-–∑–∞–ø–∏—Å—å)

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@–≤–∞—à-—Å–µ—Ä–≤–µ—Ä-ip
```

### –®–∞–≥ 2: –°–∫–∞—á–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

```bash
wget https://raw.githubusercontent.com/wrx861/market/main/deployment/install-with-git.sh
chmod +x install-with-git.sh
sudo bash install-with-git.sh
```

### –®–∞–≥ 3: –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç:

1. **–î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `miniapp.shopmarketbot.ru`)
2. **API –∫–ª—é—á–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:**
   - Telegram Bot Token
   - Telegram Admin ID
   - Google API Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - Rossko API Key 1 –∏ Key 2
   - Autotrade: –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, API –∫–ª—é—á
   - Berg API Key
   - Autostels: –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, ID
   - PartsAPI Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - OpenAI API Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 4: –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–π–º–µ—Ç **10-15 –º–∏–Ω—É—Ç**:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Let's Encrypt)
- ‚úÖ –°–±–æ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 5: –ì–æ—Ç–æ–≤–æ! üéâ

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /opt/market-auto-parts

üîÑ –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï –° GITHUB:
–ö–æ–≥–¥–∞ –≤—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub, –æ–±–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π:

  cd /opt/market-auto-parts
  bash deployment/update.sh
```

---

## üìã –ß—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç?

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- Docker & Docker Compose
- Git
- Certbot (–¥–ª—è SSL)
- Nginx (–≤–Ω—É—Ç—Ä–∏ Docker)
- MongoDB (–≤–Ω—É—Ç—Ä–∏ Docker)

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- **Backend** (FastAPI) - –ø–æ—Ä—Ç 8001
- **Frontend** (React) - –ø–æ—Ä—Ç 3001
- **MongoDB** - –ø–æ—Ä—Ç 27017
- **Nginx** - –ø–æ—Ä—Ç—ã 80, 443 (SSL)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
/opt/market-auto-parts/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ server.py
‚îÇ   ‚îú‚îÄ‚îÄ telegram_bot.py
‚îÇ   ‚îú‚îÄ‚îÄ .env (–≤–∞—à–∏ API –∫–ª—é—á–∏)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ .env
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ deployment/
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îú‚îÄ‚îÄ update.sh
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ ...
```

---

## üîë –¢—Ä–µ–±—É–µ–º—ã–µ API –∫–ª—é—á–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
1. **Telegram Bot Token** - –æ—Ç @BotFather
2. **Telegram Admin ID** - –≤–∞—à Telegram ID
3. **Rossko API Keys** - 2 –∫–ª—é—á–∞ –æ—Ç api.rossko.ru
4. **Autotrade** - –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, API –∫–ª—é—á –æ—Ç autotrade.su
5. **Berg API Key** - –∫–ª—é—á –æ—Ç Berg

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
6. **Google API Key** - –¥–ª—è Gemini AI
7. **PartsAPI Key** - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ VIN
8. **OpenAI API Key** - –¥–ª—è AI –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
9. **Autostels** - –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, parent ID

---

## üõ†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–µ—Ä (—Å Docker)

–ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–∂–µ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
wget https://raw.githubusercontent.com/wrx861/market/main/deployment/install-existing-server.sh
chmod +x install-existing-server.sh
sudo bash install-existing-server.sh
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–æ—Ä—Ç—ã –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ SSL (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
wget https://raw.githubusercontent.com/wrx861/market/main/deployment/install-no-ssl.sh
chmod +x install-no-ssl.sh
sudo bash install-no-ssl.sh
```

‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
cd /opt/market-auto-parts
bash deployment/update.sh
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ alias:

```bash
echo 'alias update-app="cd /opt/market-auto-parts && bash deployment/update.sh"' >> ~/.bashrc
source ~/.bashrc

# –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ:
update-app
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç update.sh:**
1. –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–¥ —Å GitHub
2. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑—ã
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å

---

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: DNS –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

**–°–∏–º–ø—Ç–æ–º:** `Temporary failure in name resolution`

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Å–∫—Ä–∏–ø—Ç! –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è `/etc/docker/daemon.json`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –≤—ã–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ–º–µ–Ω –Ω–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ A-–∑–∞–ø–∏—Å—å: `nslookup –≤–∞—à-–¥–æ–º–µ–Ω.ru`
2. –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
cd /opt/market-auto-parts/deployment
docker-compose logs backend
docker-compose logs frontend
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:
```bash
cd /opt/market-auto-parts/deployment
docker-compose ps
```

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `Up`.

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
cd /opt/market-auto-parts/deployment
docker-compose ps
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ backend API:
```bash
curl https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/api/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"healthy","timestamp":"..."}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend:
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru`

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram –±–æ—Ç–∞:
–ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É `/start`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

1. **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏** –≤ `.env` —Ñ–∞–π–ª–∞—Ö
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall:**
   ```bash
   sudo ufw allow 80/tcp
   sudo ufw allow 443/tcp
   sudo ufw allow 22/tcp
   sudo ufw enable
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL:**
   ```bash
   sudo certbot renew --dry-run
   ```

4. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã MongoDB:**
   ```bash
   docker-compose exec mongodb mongodump --out /backup
   ```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–õ–æ–≥–∏:**
```bash
# Backend
docker-compose logs -f backend

# Frontend
docker-compose logs -f frontend

# Nginx
docker-compose logs -f nginx

# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
```bash
docker-compose restart        # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart backend  # –¢–æ–ª—å–∫–æ backend
```

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
docker-compose down
```

**–ó–∞–ø—É—Å–∫:**
```bash
docker-compose up -d
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [ ] –°–µ—Ä–≤–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- [ ] –î–æ–º–µ–Ω –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü–æ–ª—É—á–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API –∫–ª—é—á–∏
- [ ] –°–∫—Ä–∏–ø—Ç install-with-git.sh —Å–∫–∞—á–∞–Ω
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã (docker-compose ps)
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] Backend API –æ—Ç–≤–µ—á–∞–µ—Ç (/api/health)
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start
- [ ] –ü–æ–∏—Å–∫ –∑–∞–ø—á–∞—Å—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** ~10-15 –º–∏–Ω—É—Ç  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 15 –Ω–æ—è–±—Ä—è 2025

üéâ **–ì–æ—Ç–æ–≤–æ! –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ https://–≤–∞—à-–¥–æ–º–µ–Ω.ru**

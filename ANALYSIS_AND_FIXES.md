# Анализ проблем и исправления

## Проблема: При поиске SCP10184 не показываются результаты от Rossko и Autotrade

### Найденные проблемы:

1. **Autotrade_client.py (строки 137-161)**: Слишком агрессивная фильтрация
   - Удаляются префиксы ST, OE, OEM
   - Проверяется пересечение оставшихся частей
   - **Проблема**: SCP10184 и ST-54630-H5103 после обработки не пересекаются
   - **Результат**: Правильные результаты фильтруются и не показываются

2. **Autostels не используется**: В server.py создается экземпляр autostels_client, но он НЕ добавлен в параллельный поиск
   - Импорт есть (строка 22)
   - Инициализация есть (строка 111)
   - **НО**: не вызывается в asyncio.gather() (строка 217)

3. **Berg_client.py**: Отсутствует файл или может быть неправильная логика

## План исправлений:

### 1. Исправить фильтрацию в autotrade_client.py
- Убрать или смягчить проверку пересечения артикулов
- Оставить только базовую проверку релевантности

### 2. Добавить Autostels в параллельный поиск
- Создать функцию search_autostels() в server.py
- Добавить в asyncio.gather()
- Обработать результаты

### 3. Проверить и исправить Berg_client.py
- Убедиться что файл существует
- Проверить логику поиска

### 4. Проверить дедупликацию
- Убедиться что дедупликация не удаляет нужные результаты
- Проверить логику выбора лучшего предложения

## Текущая структура:

```
Поставщики в коде:
✅ RosskoClient - инициализирован и используется
✅ AutotradeClient - инициализирован и используется  
✅ BergClient - инициализирован и используется
⚠️  AutostelsClient - инициализирован но НЕ используется в поиске

Параллельный поиск (server.py:217):
- search_rossko()
- search_autotrade()
- search_berg()
ОТСУТСТВУЕТ: search_autostels()
```

## Исправления:

### Исправление 1: Убрать агрессивную фильтрацию в Autotrade
### Исправление 2: Добавить Autostels в параллельный поиск
### Исправление 3: Проверить Berg API ключ и логику
